(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{269:function(e,n,t){e.exports=t(584)},274:function(e,n,t){},276:function(e,n,t){},584:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(17),c=t.n(u),s=(t(274),t(190)),o=t(31),i=t(183),l=t(184),h=t(192),d=t(185),b=t(191),p=t(45),m=(t(276),t(65)),f=t.n(m),g=t(186),v=t.n(g),w=t(187),k=t(30),j=t(188),y=t.n(j),E="__ALL__",C=new RegExp(";;"),U=function(e){function n(e){var t;Object(i.a)(this,n),(t=Object(h.a)(this,Object(d.a)(n).call(this,e))).picker=null,t.register=function(e){t.picker=e},t.leaveChat=function(){t.pubnub.unsubscribe({channels:[t.channel]})},t.onMessage=function(e){console.log(e.message),t.state.enabled&&(e.message.userId!==E&&e.message.userId!==t.userId||("colorChange"===e.message.action&&t.setState(function(){var n=Object(o.a)({},t.state);return n.background=e.message.color,n}),"jumpToUrl"===e.message.action&&(window.location.href=e.message.url)))},t.onPresenceChange=function(e){switch(e.action){case"join":t.addUser(e.uuid);break;case"leave":case"timeout":t.removeUser(e.uuid);break;default:console.error("unknown action: "+e.action)}},t.onStatusChange=function(e){console.log("status changed",e)},t.jump=function(e){return function(){var n={action:"jumpToUrl",userId:e,url:t.state.jumpToUrl};t.pubnub.publish({message:n,channel:t.channel})}},t.handle1=function(e){return function(n){var a={action:"colorChange",userId:e,color:n.hex};t.pubnub.publish({message:a,channel:t.channel})}},t.handle2=function(e){return function(n){if(t.state.enabled&&(e===E||e===t.userId)){var a=Object(o.a)({},t.state);a.background=n.hex,t.setState(function(){return a})}}},t.addUser=function(e){if(e){e.uuid&&(e=e.uuid);var n=Object(o.a)({},t.state);t.state.users.includes(e)||n.users.push(e),t.setState(function(){return n})}},t.removeUser=function(e){return function(){var n=Object(o.a)({},t.state);n.users=f()(n.users).filter(function(n){return n!==e}),t.setState(function(){return n})}},t.toggleEnabled=function(e){return function(e){var n=Object(o.a)({},t.state);n.enabled=e.target.checked,t.setState(function(){return n})}},t.handleTextChange=function(e){var n=Object(o.a)({},t.state);n.jumpToUrl=e.target.value,t.setState(function(){return n})};var a=window.location.href.split("?");return t.urlQuery=a&&a[1]||"default",t.isAdmin=t.urlQuery.match(C),t.url=window.location.href,t.isAdmin&&(t.urlQuery=t.urlQuery.replace(C,""),t.url=t.url.replace(C,"")),t.channel="__v2__"+t.urlQuery,t.userId="User"+Math.round(1e3*Math.random()),t.jumpToUrl="https://pubnub.com",t.state={enabled:!0,background:"#aaa",jumpToUrl:"https://pubnub.com",users:[]},t.pubnub=new v.a({publishKey:"pub-c-3774941a-49a4-4b06-85c6-a08b45f3d1cf",subscribeKey:"sub-c-bf8fb378-edb1-11e8-aba4-3a82e8287a69",uuid:t.userId}),t.pubnub.init(Object(p.a)(Object(p.a)(t))),t}return Object(b.a)(n,e),Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=this;window.addEventListener("beforeunload",e.leaveChat),this.pubnub.subscribe({channels:[e.channel],withPresence:!0}),this.pubnub.getMessage(this.channel,e.onMessage),this.pubnub.getPresence(this.channel,e.onPresenceChange),this.pubnub.getStatus(e.onStatusChange),this.pubnub.hereNow({channels:[this.channel]},function(n,t){f()(t.channels[e.channel].occupants).forEach(function(n){return e.addUser(n)})})}},{key:"componentWillUnmount",value:function(){this.leaveChat()}},{key:"renderAdmin",value:function(){var e=this;if(this.isAdmin){var n=[E].concat(Object(s.a)(this.state.users)),t=f.a.map(n,function(n){return r.a.createElement(k.b,{key:n,style:{width:"340px",marginTop:"20px"}},r.a.createElement(k.f,{variant:"h6",component:"h6"},n),r.a.createElement(k.c,null,r.a.createElement(w.GithubPicker,{enabled:e.state.enabled,ref:function(n){e.picker=n},triangle:"hide",color:e.state.background,onChange:e.handle1(n),onChangeComplete:e.handle2(n)}),r.a.createElement(k.a,{onClick:e.jump(n)},"Jump!")))});return r.a.createElement("div",{id:"Admin"},t,r.a.createElement("div",{style:{paddingTop:"20px"}}),r.a.createElement(k.e,{label:"Jump to URL",value:this.state.jumpToUrl,onChange:this.handleTextChange}))}}},{key:"render",value:function(){return r.a.createElement("div",{id:"App",className:"App",flex:1},r.a.createElement("header",{className:"App-header",style:{background:this.state.background}},r.a.createElement(y.a,{value:this.url,style:{width:"300px",height:"300px"}}),r.a.createElement("div",{style:{margin:"10px"}},this.userId),r.a.createElement(k.d,{checked:this.state.enabled,onChange:this.toggleEnabled("enabled"),color:"primary"}),this.renderAdmin()))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[269,2,1]]]);
//# sourceMappingURL=main.d8b42cc8.chunk.js.map